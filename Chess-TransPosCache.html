<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chess.TransPosCache</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Chess-TransPosCache.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">chess</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Chess.TransPosCache</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Constructors</a></li><li><a href="#g:2">Lenses</a></li><li><a href="#g:3">Utils</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Transpositional cache</p><p>We return hit if all of the 3 conditions are met:</p><ol><li>hash of Board matches</li><li>Board equals</li><li>depth is equal or less than the one stored in cache</li></ol><p>The are no entries with only the depth differing. Therefore inserting the
 same position with different depth updates the previous entry. Also EXACT
 entry wins over LOWER or UPPER.  For more info see
 <a href="http://chessprogramming.wikispaces.com/Transposition+Table">http://chessprogramming.wikispaces.com/Transposition+Table</a>.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:TransPosCache">TransPosCache</a> = <a href="http://hackage.haskell.org/packages/archive/lrucache/latest/doc/html/Data-Cache-LRU.html#t:LRU">LRU</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Word.html#t:Word64">Word64</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntry">TransPosCacheEntry</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:TransPosCacheEntry">TransPosCacheEntry</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:TransPosCacheEntryType">TransPosCacheEntryType</a><ul class="subs"><li>= <a href="#v:Exact">Exact</a> <a href="Chess-Move-Move.html#t:Move">Move</a> [<a href="Chess-Move-Move.html#t:Move">Move</a>]</li><li>| <a href="#v:Lower">Lower</a> <a href="Chess-Move-Move.html#t:Move">Move</a></li><li>| <a href="#v:Upper">Upper</a></li></ul></li><li class="src short"><a href="#v:mkTransPosCache">mkTransPosCache</a> :: <a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a></li><li class="src short"><a href="#v:board">board</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/latest/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntry">TransPosCacheEntry</a> <a href="Chess-Board-Board.html#t:Board">Board</a></li><li class="src short"><a href="#v:depth">depth</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/latest/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntry">TransPosCacheEntry</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:score">score</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/latest/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntry">TransPosCacheEntry</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:typ">typ</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/latest/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntry">TransPosCacheEntry</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntryType">TransPosCacheEntryType</a></li><li class="src short"><a href="#v:transPosCacheLookUp">transPosCacheLookUp</a> :: <a href="Chess-Board-Board.html#t:Board">Board</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a> -&gt; <a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Either.html#t:Either">Either</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Chess-Move-Move.html#t:Move">Move</a>) (<a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a>, <a href="Chess-TransPosCache.html#t:TransPosCacheEntry">TransPosCacheEntry</a>)</li><li class="src short"><a href="#v:transPosCacheInsert">transPosCacheInsert</a> :: <a href="Chess-Board-Board.html#t:Board">Board</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a> -&gt; <a href="Chess-TransPosCache.html#t:TransPosCacheEntryType">TransPosCacheEntryType</a> -&gt; <a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a> -&gt; <a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a></li><li class="src short"><a href="#v:transPosCacheDeflate">transPosCacheDeflate</a> :: <a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a> -&gt; <a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:TransPosCache" class="def">TransPosCache</a> = <a href="http://hackage.haskell.org/packages/archive/lrucache/latest/doc/html/Data-Cache-LRU.html#t:LRU">LRU</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Word.html#t:Word64">Word64</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntry">TransPosCacheEntry</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:TransPosCacheEntry" class="def">TransPosCacheEntry</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:TransPosCacheEntryType" class="def">TransPosCacheEntryType</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Exact" class="def">Exact</a> <a href="Chess-Move-Move.html#t:Move">Move</a> [<a href="Chess-Move-Move.html#t:Move">Move</a>]</td><td class="doc"><p>An exact lookup always contains at least one move.</p></td></tr><tr><td class="src"><a name="v:Lower" class="def">Lower</a> <a href="Chess-Move-Move.html#t:Move">Move</a></td><td class="doc"><p>A lower bound cut contains just one move.</p></td></tr><tr><td class="src"><a name="v:Upper" class="def">Upper</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:TransPosCacheEntryType" class="caption collapser" onclick="toggleSection('i:TransPosCacheEntryType')">Instances</p><div id="section.i:TransPosCacheEntryType" class="show"><table><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Eq.html#t:Eq">Eq</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntryType">TransPosCacheEntryType</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Text-Show.html#t:Show">Show</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntryType">TransPosCacheEntryType</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:1">Constructors</h1><div class="top"><p class="src"><a name="v:mkTransPosCache" class="def">mkTransPosCache</a> :: <a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a></p></div><h1 id="g:2">Lenses</h1><div class="top"><p class="src"><a name="v:board" class="def">board</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/latest/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntry">TransPosCacheEntry</a> <a href="Chess-Board-Board.html#t:Board">Board</a></p></div><div class="top"><p class="src"><a name="v:depth" class="def">depth</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/latest/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntry">TransPosCacheEntry</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></p></div><div class="top"><p class="src"><a name="v:score" class="def">score</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/latest/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntry">TransPosCacheEntry</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></p></div><div class="top"><p class="src"><a name="v:typ" class="def">typ</a> :: <a href="http://hackage.haskell.org/packages/archive/lens/latest/doc/html/Control-Lens-Type.html#t:Lens-39-">Lens'</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntry">TransPosCacheEntry</a> <a href="Chess-TransPosCache.html#t:TransPosCacheEntryType">TransPosCacheEntryType</a></p></div><h1 id="g:3">Utils</h1><div class="top"><p class="src"><a name="v:transPosCacheLookUp" class="def">transPosCacheLookUp</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Chess-Board-Board.html#t:Board">Board</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>depth</p></td></tr><tr><td class="src">-&gt; <a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Either.html#t:Either">Either</a> (<a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Chess-Move-Move.html#t:Move">Move</a>) (<a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a>, <a href="Chess-TransPosCache.html#t:TransPosCacheEntry">TransPosCacheEntry</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Either a move recommendation or Nothing on miss or the cache entry with
 the updated LRU on hit</p></div></div><div class="top"><p class="src"><a name="v:transPosCacheInsert" class="def">transPosCacheInsert</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Chess-Board-Board.html#t:Board">Board</a></td><td class="doc"><p>board</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>depth</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>score</p></td></tr><tr><td class="src">-&gt; <a href="Chess-TransPosCache.html#t:TransPosCacheEntryType">TransPosCacheEntryType</a></td><td class="doc"><p>type</p></td></tr><tr><td class="src">-&gt; <a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Returns a cache with the entry inserted</p></div></div><div class="top"><p class="src"><a name="v:transPosCacheDeflate" class="def">transPosCacheDeflate</a> :: <a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a> -&gt; <a href="Chess-TransPosCache.html#t:TransPosCache">TransPosCache</a></p><div class="doc"><p>decreases the depth of each entry by 1</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>