<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chess.TimeControl</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Chess-TimeControl.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">chess</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Chess.TimeControl</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Setters</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>The module calculates the allocated time for the search based on the
 times remaining and other factors.</p><p><a href="https://chessprogramming.wikispaces.com/Time+Management">https://chessprogramming.wikispaces.com/Time+Management</a></p><p>The allocated time for the search is independent of the engine speed, 
 and only depends on the remaining times, the moves played, and the state 
 of the game. The search is supposed to call the <code><a href="Chess-TimeControl.html#v:timeControl">timeControl</a></code> function 
 before entering each level of iterative deepening, to decide whether to 
 proceed or terminate.</p><p>We can terminate the search prematurely if the move to be played is
 &quot;obvious&quot; ie the search is stable. For only legal moves or mate
 combinations the Search should avoid unnecessary calculations regardless of
 time control.
 Move stability depends on the oscillation of the score between the
 deepening iterations.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:TimeControl">TimeControl</a><ul class="subs"><li>= <a href="#v:Timed">Timed</a> { <ul class="subs"><li><a href="#v:whiteTime">whiteTime</a> :: Time</li><li><a href="#v:whiteInc">whiteInc</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> Time</li><li><a href="#v:blackTime">blackTime</a> :: Time</li><li><a href="#v:blackInc">blackInc</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> Time</li><li><a href="#v:movesToGo">movesToGo</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></li></ul> }</li><li>| <a href="#v:DepthSpecified">DepthSpecified</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></li><li>| <a href="#v:TimeSpecified">TimeSpecified</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></li><li>| <a href="#v:Infinite">Infinite</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:TimeStats">TimeStats</a></li><li class="src short"><a href="#v:mkTimeStats">mkTimeStats</a> :: <a href="Chess-TimeControl.html#t:TimeStats">TimeStats</a></li><li class="src short"><a href="#v:addStats">addStats</a> :: Time -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Chess-Move-Move.html#t:Move">Move</a>, <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Chess-TimeControl.html#t:TimeStats">TimeStats</a> -&gt; <a href="Chess-TimeControl.html#t:TimeStats">TimeStats</a></li><li class="src short"><a href="#v:timeControl">timeControl</a> :: <a href="Data-ChessTypes.html#t:Colour">Colour</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a> -&gt; <a href="Chess-TimeControl.html#t:TimeStats">TimeStats</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:setWhiteTime">setWhiteTime</a> :: Time -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a></li><li class="src short"><a href="#v:setBlackTime">setBlackTime</a> :: Time -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a></li><li class="src short"><a href="#v:setWhiteInc">setWhiteInc</a> :: Time -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a></li><li class="src short"><a href="#v:setBlackInc">setBlackInc</a> :: Time -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a></li><li class="src short"><a href="#v:setMovesToGo">setMovesToGo</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:TimeControl" class="def">TimeControl</a></p><div class="doc"><p>The time control setup as received from the UCI.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Timed" class="def">Timed</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:whiteTime" class="def">whiteTime</a> :: Time</dt><dd class="doc"><p>White player's time     </p></dd><dt class="src"><a name="v:whiteInc" class="def">whiteInc</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> Time</dt><dd class="doc"><p>White player's increment                   </p></dd><dt class="src"><a name="v:blackTime" class="def">blackTime</a> :: Time</dt><dd class="doc"><p>Black player's time      </p></dd><dt class="src"><a name="v:blackInc" class="def">blackInc</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> Time</dt><dd class="doc"><p>Black player's increment</p></dd><dt class="src"><a name="v:movesToGo" class="def">movesToGo</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>Moves until time controll</p></dd></dl><div class="clear"></div></div></td></tr><tr><td class="src"><a name="v:DepthSpecified" class="def">DepthSpecified</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Ignore time, use this depth</p></td></tr><tr><td class="src"><a name="v:TimeSpecified" class="def">TimeSpecified</a> <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Run for this amount of time         </p></td></tr><tr><td class="src"><a name="v:Infinite" class="def">Infinite</a></td><td class="doc"><p>Run for ever</p></td></tr></table></div><div class="subs instances"><p id="control.i:TimeControl" class="caption collapser" onclick="toggleSection('i:TimeControl')">Instances</p><div id="section.i:TimeControl" class="show"><table><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Text-Show.html#t:Show">Show</a> <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:TimeStats" class="def">TimeStats</a></p><div class="doc"><p>The store for the search statistics. Storing the time taken, the 
 evaluation, and the best move per depth level.</p></div></div><div class="top"><p class="src"><a name="v:mkTimeStats" class="def">mkTimeStats</a> :: <a href="Chess-TimeControl.html#t:TimeStats">TimeStats</a></p><div class="doc"><p>Creates an empty <code><a href="Chess-TimeControl.html#t:TimeStats">TimeStats</a></code> instance</p></div></div><div class="top"><p class="src"><a name="v:addStats" class="def">addStats</a> :: Time -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Chess-Move-Move.html#t:Move">Move</a>, <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Chess-TimeControl.html#t:TimeStats">TimeStats</a> -&gt; <a href="Chess-TimeControl.html#t:TimeStats">TimeStats</a></p><div class="doc"><p>Adds the next level to the statistics</p></div></div><div class="top"><p class="src"><a name="v:timeControl" class="def">timeControl</a> :: <a href="Data-ChessTypes.html#t:Colour">Colour</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a> -&gt; <a href="Chess-TimeControl.html#t:TimeStats">TimeStats</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Bool.html#t:Bool">Bool</a></p><div class="doc"><p>Time control. Based on pondering, the UCI time control, the number of
 remaining pieces, and our current time statistics decides whether we can
 proceed to the next level.</p></div></div><h1 id="g:1">Setters</h1><div class="top"><p class="src"><a name="v:setWhiteTime" class="def">setWhiteTime</a> :: Time -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a></p><div class="doc"><p>Sets white's time</p></div></div><div class="top"><p class="src"><a name="v:setBlackTime" class="def">setBlackTime</a> :: Time -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a></p><div class="doc"><p>Sets black's time</p></div></div><div class="top"><p class="src"><a name="v:setWhiteInc" class="def">setWhiteInc</a> :: Time -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a></p><div class="doc"><p>Sets white's increment</p></div></div><div class="top"><p class="src"><a name="v:setBlackInc" class="def">setBlackInc</a> :: Time -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a></p><div class="doc"><p>Sets black's increment</p></div></div><div class="top"><p class="src"><a name="v:setMovesToGo" class="def">setMovesToGo</a> :: <a href="http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Int.html#t:Int">Int</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a> -&gt; <a href="Chess-TimeControl.html#t:TimeControl">TimeControl</a></p><div class="doc"><p>Sets the moves to go until the next time control</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.14.3</p></div></body></html>